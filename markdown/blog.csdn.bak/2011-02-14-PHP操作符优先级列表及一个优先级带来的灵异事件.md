---
layout: post
title: PHP操作符优先级列表及一个优先级带来的"灵异事件"
date: 2011-02-14 14:23:00
categories: [php, c, 文档, 测试]
tags: []
---
操作符的优先级, 原本都没有注意过的, 前段时间, 在论坛看到一个帖子是关于优先级的.
[http://topic.csdn.net/u/20110116/03/01cf9bf2-71be-4c2c-9c00-f0a154b4da7e.html](http://topic.csdn.net/u/20110116/03/01cf9bf2-71be-4c2c-9c00-f0a154b4da7e.html)
 
今天, 再看文档的过程中, 突然发现一直混用的and, or, xor这几个逻辑运算符和&&, ||这俩逻辑运算符的优先级是不一致的.
经过实验才发现这几个逻辑运算符再某些情况下是不能混用的....希望看过的朋友在碰到类似问题时, 考虑考虑优先级问题, 避免走弯路.
 
文档中描述的优先级顺序是: &&, ||, 接下来是三元操作符和赋值运算符, 接下来是and, xor, or
我的测试代码是这样的:
 

```php
&lt;?php
$a = 5;
$b = 1;
$c = ($a += $b or 0);
print "use or: /$a = $a, /$b = $b, /$c = $c.&lt;br /&gt;/n";
$a = 5;
$b = 1;
$c = ($a += $b || 0);
print "use or: /$a = $a, /$b = $b, /$c = $c.&lt;br /&gt;/n";
?&gt;
```
 
输出结果:

```php
use or: $a = 6, $b = 1, $c = 1.
use or: $a = 6, $b = 1, $c = 6.
```
 
很显然, 同样的运算, 使用了看起来同样的运算符, 得到的结果是不一致的
这其中就是运算符的优先级在作怪
对于$c = ($a += $b or 0), 由于+=优先级高于or, 运算式就变成了$c = (($a += $b) or 0), 
而对于$c = ($a += $b || 0), 由于||优先级高于+=, 运算式变为$c = ($a += ($b || 0)).
 
一个"优先级"引发的血案啊.....
值得和我一样粗心的朋友们共勉...
 
 
 
 
PHP操作符优先级如下图, 三列分别是: 结合性, 操作符, 附加说明.
图片来自PHP手册截图.
![](http://hi.csdn.net/attachment/201102/14/0_1297663641xn5n.gif)
 
