---
layout: post
title: PHP中利用pcntl实现多进程(模拟多线程)实例
date: 2010-08-13 16:00:00
categories: [多线程, php, function, blog, 测试, user]
tags: []
---

```php
&lt;?php
/**
 * 创建子进程入口
 * @author selfimpr
 * @blog http://blog.csdn.net/lgg201
 * @mail goosman.lei@gmail.com
 * @param $func_name 代表子进程处理过程的函数名
 * @param other 接受不定参数, 提供给子进程的过程函数.
 */
function new_child($func_name) {
	$args = func_get_args();
	unset($args[0]);
	$pid = pcntl_fork();
	if($pid == 0) {
		function_exists($func_name) and exit(call_user_func_array($func_name, $args)) or exit(-1);
	} else if($pid == -1) {
		echo &ldquo;Couldn&rsquo;t create child process.&rdquo;;
	}
}
//测试处理函数, 输出$prefix连接的数组
function test($prefix, $num) {
	while($i ++ &lt; $num) echo $prefix.$i.&rdquo;/n&rdquo;;
}
//创建一个子进程
new_child(&ldquo;test&rdquo;, &ldquo;child process &ldquo;, 100);
//父进程也开启一个与子进程同样多的循环.
teest(&ldquo;parent process&rdquo;, 100);
//运行结果, 我这里运行父进程输出50个左右, 子进程开始运行.
?&gt;

```

