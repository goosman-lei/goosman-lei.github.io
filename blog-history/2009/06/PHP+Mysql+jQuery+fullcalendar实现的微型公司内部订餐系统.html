
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="goosman-lei的博客">
    <meta name="keywords" content="PHP Web开发,PHP,PHP 框架,高可用,分布式">

    <title>PHP+Mysql+jQuery+fullcalendar实现的微型公司内部订餐系统- By Goosman-lei(goosman.lei@gmail.com</title>

    <!-- Styles -->
    <link href="http://static-cdn.tec-inf.com/css/theDocs.all.min.css" rel="stylesheet">
    <link href="http://static-cdn.tec-inf.com/css/theDocs.css" rel="stylesheet">
    <link href="http://static-cdn.tec-inf.com/css/custom.css" rel="stylesheet">

    <!-- Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Raleway:100,300,400,500%7CLato:300,400' rel='stylesheet' type='text/css'>

    <!-- Favicons -->
    <link rel="apple-touch-icon" href="http://static-cdn.tec-inf.com/apple-touch-icon.png">
    <link rel="icon" href="http://static-cdn.tec-inf.com/img/favicon.ico">

    <!-- Github Buttons. Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
  </head>

  <body>

    <header class="site-header">

      <!-- Top navbar & branding -->
      <nav class="navbar navbar-default">
        <div class="container">

          <!-- Toggle buttons and brand -->
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar" aria-expanded="true" aria-controls="navbar">
              <span class="glyphicon glyphicon-option-vertical"></span>
            </button>

            <button type="button" class="navbar-toggle for-sidebar" data-toggle="offcanvas">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand" href="">Goosman.lei</a>
          </div>
          <!-- END Toggle buttons and brand -->

          <!-- Top navbar -->
          <div id="navbar" class="navbar-collapse collapse" aria-expanded="true" role="banner">
            <ul class="nav navbar-nav navbar-right">
                              <li class=""><a href="/ice">Ice</a></li>
                              <li class=" active"><a href="/blog-history">CSDN-BLOG</a></li>
                              <li class="hero"><a href="mailto:goosman.lei@gmail.com">Contact</a></li>
                          </ul>
          </div>
          <!-- END Top navbar -->

        </div>
      </nav>
      <!-- END Top navbar & branding -->
      
    </header>


    <main class="container">
      <div class="row">

        <!-- Sidebar -->
        <aside class="col-md-3 col-sm-3 sidebar">
<a class="github-button" href="https://github.com/goosman-lei" data-style="mega" data-count-href="/goosman-lei/followers" data-count-api="/users/goosman-lei#followers" data-count-aria-label="# followers on GitHub" aria-label="Follow @goosman-lei on GitHub">Follow @goosman-lei</a><br />

<!-- TODO 解递归当场遍历出树结构菜单 -->
<ul class="sidenav">
  <li><a href="/blog-history/2016/06/[分享]面向中大型应用的PHPWeb开发框架Ice.html">2016年</a>
  <ul>
    <li><a href="/blog-history/2016/06/[分享]面向中大型应用的PHPWeb开发框架Ice.html">06月</a>
    <ul>
      <li><a href="/blog-history/2016/06/[分享]面向中大型应用的PHPWeb开发框架Ice.html">[分享]面向中大型应用的PHPWeb开发框架Ice</a>
    </ul></li>
  </ul></li>
  <li><a href="/blog-history/2013/06/[翻译][php扩展开发和嵌入式]第20章-php的高级嵌入式.html">2013年</a>
  <ul>
    <li><a href="/blog-history/2013/06/[翻译][php扩展开发和嵌入式]第20章-php的高级嵌入式.html">06月</a>
    <ul>
      <li><a href="/blog-history/2013/06/[翻译][php扩展开发和嵌入式]第20章-php的高级嵌入式.html">[翻译][php扩展开发和嵌入式]第20章-php的高级嵌入式</a>
      <li><a href="/blog-history/2013/06/[翻译][php扩展开发和嵌入式]第19章-设置宿主环境.html">[翻译][php扩展开发和嵌入式]第19章-设置宿主环境</a>
      <li><a href="/blog-history/2013/06/[翻译][php扩展开发和嵌入式]第18章-php的扩展自动生成.html">[翻译][php扩展开发和嵌入式]第18章-php的扩展自动生成</a>
      <li><a href="/blog-history/2013/06/[翻译][php扩展开发和嵌入式]第17章-php源代码的配置和链接.html">[翻译][php扩展开发和嵌入式]第17章-php源代码的配置和链接</a>
    </ul></li>
    <li><a href="/blog-history/2013/05/[翻译][php扩展开发和嵌入式]第16章-有趣的流.html">05月</a>
    <ul>
      <li><a href="/blog-history/2013/05/[翻译][php扩展开发和嵌入式]第16章-有趣的流.html">[翻译][php扩展开发和嵌入式]第16章-有趣的流</a>
      <li><a href="/blog-history/2013/05/[翻译][php扩展开发和嵌入式]第15章-php中流的实现.html">[翻译][php扩展开发和嵌入式]第15章-php中流的实现</a>
    </ul></li>
    <li><a href="/blog-history/2013/04/[翻译][php扩展开发和嵌入式]第14章-php中流的访问.html">04月</a>
    <ul>
      <li><a href="/blog-history/2013/04/[翻译][php扩展开发和嵌入式]第14章-php中流的访问.html">[翻译][php扩展开发和嵌入式]第14章-php中流的访问</a>
      <li><a href="/blog-history/2013/04/[翻译][php扩展开发和嵌入式]第13章-php的INI设置.html">[翻译][php扩展开发和嵌入式]第13章-php的INI设置</a>
      <li><a href="/blog-history/2013/04/[翻译][php扩展开发和嵌入式]第12章-php的启动过程.html">[翻译][php扩展开发和嵌入式]第12章-php的启动过程</a>
      <li><a href="/blog-history/2013/04/[翻译][php扩展开发和嵌入式]第11章-php5对象.html">[翻译][php扩展开发和嵌入式]第11章-php5对象</a>
      <li><a href="/blog-history/2013/04/[翻译][php扩展开发和嵌入式]第10章-php4的对象.html">[翻译][php扩展开发和嵌入式]第10章-php4的对象</a>
    </ul></li>
    <li><a href="/blog-history/2013/03/[翻译][php扩展开发和嵌入式]第9章-资源数据类型.html">03月</a>
    <ul>
      <li><a href="/blog-history/2013/03/[翻译][php扩展开发和嵌入式]第9章-资源数据类型.html">[翻译][php扩展开发和嵌入式]第9章-资源数据类型</a>
      <li><a href="/blog-history/2013/03/[翻译][php扩展开发和嵌入式]第8章-在数组和哈希表上工作.html">[翻译][php扩展开发和嵌入式]第8章-在数组和哈希表上工作</a>
      <li><a href="/blog-history/2013/03/[翻译][php扩展开发和嵌入式]第7章-接受参数.html">[翻译][php扩展开发和嵌入式]第7章-接受参数</a>
      <li><a href="/blog-history/2013/03/从1.5k到18k,一个程序员的5年成长之路.html">从1.5k到18k,一个程序员的5年成长之路</a>
    </ul></li>
    <li><a href="/blog-history/2013/02/[翻译][php扩展开发和嵌入式]第6章-返回值.html">02月</a>
    <ul>
      <li><a href="/blog-history/2013/02/[翻译][php扩展开发和嵌入式]第6章-返回值.html">[翻译][php扩展开发和嵌入式]第6章-返回值</a>
      <li><a href="/blog-history/2013/02/[翻译][php扩展开发和嵌入式]第5章-您的第一个扩展.html">[翻译][php扩展开发和嵌入式]第5章-您的第一个扩展</a>
      <li><a href="/blog-history/2013/02/[翻译][php扩展开发和嵌入式]第4章-安装构建环境.html">[翻译][php扩展开发和嵌入式]第4章-安装构建环境</a>
    </ul></li>
    <li><a href="/blog-history/2013/01/[翻译][php扩展开发和嵌入式]第3章-内存管理.html">01月</a>
    <ul>
      <li><a href="/blog-history/2013/01/[翻译][php扩展开发和嵌入式]第3章-内存管理.html">[翻译][php扩展开发和嵌入式]第3章-内存管理</a>
      <li><a href="/blog-history/2013/01/[翻译][php扩展开发和嵌入式]第2章-变量的里里外外.html">[翻译][php扩展开发和嵌入式]第2章-变量的里里外外</a>
      <li><a href="/blog-history/2013/01/[php内核bug]动态链接方式编译的扩展,扩展全局空间dtor导致coredump.html">[php内核bug]动态链接方式编译的扩展,扩展全局空间dtor导致coredump</a>
      <li><a href="/blog-history/2013/01/[翻译][php扩展开发和嵌入式]第1章-php的生命周期.html">[翻译][php扩展开发和嵌入式]第1章-php的生命周期</a>
      <li><a href="/blog-history/2013/01/[翻译][php扩展开发和嵌入式]第0章-译序.html">[翻译][php扩展开发和嵌入式]第0章-译序</a>
    </ul></li>
  </ul></li>
  <li><a href="/blog-history/2012/12/从N个数中选取最大的前10个[堆排序版].html">2012年</a>
  <ul>
    <li><a href="/blog-history/2012/12/从N个数中选取最大的前10个[堆排序版].html">12月</a>
    <ul>
      <li><a href="/blog-history/2012/12/从N个数中选取最大的前10个[堆排序版].html">从N个数中选取最大的前10个[堆排序版]</a>
      <li><a href="/blog-history/2012/12/从N个数中选取最大的前10个[php版].html">从N个数中选取最大的前10个[php版]</a>
      <li><a href="/blog-history/2012/12/从N个数中选取最大的前10个[C语言版].html">从N个数中选取最大的前10个[C语言版]</a>
    </ul></li>
    <li><a href="/blog-history/2012/11/php截取字符串保留完整xml标签.html">11月</a>
    <ul>
      <li><a href="/blog-history/2012/11/php截取字符串保留完整xml标签.html">php截取字符串保留完整xml标签</a>
    </ul></li>
    <li><a href="/blog-history/2012/10/[mysql-manual-5.5]7.1优化概览.html">10月</a>
    <ul>
      <li><a href="/blog-history/2012/10/[mysql-manual-5.5]7.1优化概览.html">[mysql-manual-5.5]7.1优化概览</a>
      <li><a href="/blog-history/2012/10/php-mysql扩展mysql_querymysql_unbuffered_query对比.html">php-mysql扩展mysql_querymysql_unbuffered_query对比</a>
      <li><a href="/blog-history/2012/10/简单游戏场景用户模拟.html">简单游戏场景用户模拟</a>
      <li><a href="/blog-history/2012/10/php-mysql扩展的mysql_connectmysql_pconnect比较.html">php-mysql扩展的mysql_connectmysql_pconnect比较</a>
      <li><a href="/blog-history/2012/10/模拟新浪微博自动登陆.html">模拟新浪微博自动登陆</a>
    </ul></li>
    <li><a href="/blog-history/2012/09/php-curl封装[避免上传文件二义性Bug].html">09月</a>
    <ul>
      <li><a href="/blog-history/2012/09/php-curl封装[避免上传文件二义性Bug].html">php-curl封装[避免上传文件二义性Bug]</a>
      <li><a href="/blog-history/2012/09/[漏洞]ThinkSNS严重漏洞--将全站崩溃.html">[漏洞]ThinkSNS严重漏洞--将全站崩溃</a>
      <li><a href="/blog-history/2012/09/无限递归树展示.html">无限递归树展示</a>
      <li><a href="/blog-history/2012/09/[快速记忆]C语言php的运算符优先级结合性.html">[快速记忆]C语言php的运算符优先级结合性</a>
    </ul></li>
    <li><a href="/blog-history/2012/07/基于mysql的分页程序完全解决方案含普通分页分段分页原始分页微博的since_id类分页.html">07月</a>
    <ul>
      <li><a href="/blog-history/2012/07/基于mysql的分页程序完全解决方案含普通分页分段分页原始分页微博的since_id类分页.html">基于mysql的分页程序完全解决方案含普通分页分段分页原始分页微博的since_id类分页</a>
    </ul></li>
    <li><a href="/blog-history/2012/06/[软件工程]一个故事,分析陷入焦油坑的软件项目.html">06月</a>
    <ul>
      <li><a href="/blog-history/2012/06/[软件工程]一个故事,分析陷入焦油坑的软件项目.html">[软件工程]一个故事,分析陷入焦油坑的软件项目</a>
      <li><a href="/blog-history/2012/06/输出整数类型边界值及其大小K&RTheCprogramminglanguage习题2-1.html">输出整数类型边界值及其大小K&RTheCprogramminglanguage习题2-1</a>
      <li><a href="/blog-history/2012/06/算法分析从N条成绩单信息选择M位不重复同学发奖.html">算法分析从N条成绩单信息选择M位不重复同学发奖</a>
    </ul></li>
    <li><a href="/blog-history/2012/04/ThinkPHPCore3.0源代码review文档.html">04月</a>
    <ul>
      <li><a href="/blog-history/2012/04/ThinkPHPCore3.0源代码review文档.html">ThinkPHPCore3.0源代码review文档</a>
    </ul></li>
  </ul></li>
  <li><a href="/blog-history/2011/12/正则表达式分析提取XMLXHTML标签属性.html">2011年</a>
  <ul>
    <li><a href="/blog-history/2011/12/正则表达式分析提取XMLXHTML标签属性.html">12月</a>
    <ul>
      <li><a href="/blog-history/2011/12/正则表达式分析提取XMLXHTML标签属性.html">正则表达式分析提取XMLXHTML标签属性</a>
      <li><a href="/blog-history/2011/12/封装的一个mysql_lib.php,主要是一个分页模型.html">封装的一个mysql_lib.php,主要是一个分页模型</a>
      <li><a href="/blog-history/2011/12/爱因斯坦的思考题.html">爱因斯坦的思考题</a>
      <li><a href="/blog-history/2011/12/从浏览器操作系统市场占有率分析国人.html">从浏览器操作系统市场占有率分析国人</a>
    </ul></li>
    <li><a href="/blog-history/2011/10/[php内核]----文件系统函数用于普通文件时的一些情况.html">10月</a>
    <ul>
      <li><a href="/blog-history/2011/10/[php内核]----文件系统函数用于普通文件时的一些情况.html">[php内核]----文件系统函数用于普通文件时的一些情况</a>
      <li><a href="/blog-history/2011/10/某地自动评论脚本备份.html">某地自动评论脚本备份</a>
      <li><a href="/blog-history/2011/10/使用alarm配合信号实现sleep.html">使用alarm配合信号实现sleep</a>
      <li><a href="/blog-history/2011/10/libmemcached一致性hash算法详解2----简化版的libmemcached一致性hash算法实现.html">libmemcached一致性hash算法详解2----简化版的libmemcached一致性hash算法实现</a>
      <li><a href="/blog-history/2011/10/libmemcached一致性hash算法详解1----php-memcached客户端一致性哈希与crc算法共用产生的bug分析.html">libmemcached一致性hash算法详解1----php-memcached客户端一致性哈希与crc算法共用产生的bug分析</a>
      <li><a href="/blog-history/2011/10/由信号集联想----位域授权模式的不限长扩展.html">由信号集联想----位域授权模式的不限长扩展</a>
    </ul></li>
    <li><a href="/blog-history/2011/09/PHP位域操作函数封装.html">09月</a>
    <ul>
      <li><a href="/blog-history/2011/09/PHP位域操作函数封装.html">PHP位域操作函数封装</a>
    </ul></li>
    <li><a href="/blog-history/2011/08/基于dup实现linux的dup2函数APUE练习题3.2.html">08月</a>
    <ul>
      <li><a href="/blog-history/2011/08/基于dup实现linux的dup2函数APUE练习题3.2.html">基于dup实现linux的dup2函数APUE练习题3.2</a>
    </ul></li>
    <li><a href="/blog-history/2011/07/日志分析工具（二分法分段查找处理）.html">07月</a>
    <ul>
      <li><a href="/blog-history/2011/07/日志分析工具（二分法分段查找处理）.html">日志分析工具（二分法分段查找处理）</a>
      <li><a href="/blog-history/2011/07/从dl函数分析PHP模块开发.html">从dl函数分析PHP模块开发</a>
    </ul></li>
    <li><a href="/blog-history/2011/04/php中的引用传值分析.html">04月</a>
    <ul>
      <li><a href="/blog-history/2011/04/php中的引用传值分析.html">php中的引用传值分析</a>
    </ul></li>
    <li><a href="/blog-history/2011/03/phppcre正则表达式完全教程----pcre官方文档.html">03月</a>
    <ul>
      <li><a href="/blog-history/2011/03/phppcre正则表达式完全教程----pcre官方文档.html">phppcre正则表达式完全教程----pcre官方文档</a>
      <li><a href="/blog-history/2011/03/Ubuntu中利用Grub2修复移动硬盘引导.html">Ubuntu中利用Grub2修复移动硬盘引导</a>
    </ul></li>
    <li><a href="/blog-history/2011/02/PHP包含文件requireincluderequire_onceinclude_once__autoloadspl_autoload_xxx分析总结.html">02月</a>
    <ul>
      <li><a href="/blog-history/2011/02/PHP包含文件requireincluderequire_onceinclude_once__autoloadspl_autoload_xxx分析总结.html">PHP包含文件requireincluderequire_onceinclude_once__autoloadspl_autoload_xxx分析总结</a>
      <li><a href="/blog-history/2011/02/javascript中的继承,找回丢失的constructor.html">javascript中的继承,找回丢失的constructor</a>
      <li><a href="/blog-history/2011/02/浏览器市场份额--世界范围IE大幅下滑,国内IE小幅下滑,chrome涨势稳定.html">浏览器市场份额--世界范围IE大幅下滑,国内IE小幅下滑,chrome涨势稳定</a>
      <li><a href="/blog-history/2011/02/PHP操作符优先级列表及一个优先级带来的灵异事件.html">PHP操作符优先级列表及一个优先级带来的灵异事件</a>
      <li><a href="/blog-history/2011/02/PHP中requirePKrequire_once,构建自己的高效require_once10倍的性能提升.html">PHP中requirePKrequire_once,构建自己的高效require_once10倍的性能提升</a>
    </ul></li>
    <li><a href="/blog-history/2011/01/php5.3新增的闭包语法介绍functionuse{}.html">01月</a>
    <ul>
      <li><a href="/blog-history/2011/01/php5.3新增的闭包语法介绍functionuse{}.html">php5.3新增的闭包语法介绍functionuse{}</a>
      <li><a href="/blog-history/2011/01/与PHP5.3.5的战斗----记php5.3.5安装过程.html">与PHP5.3.5的战斗----记php5.3.5安装过程</a>
    </ul></li>
  </ul></li>
  <li><a href="/blog-history/2010/12/PHP在线实现工具linux下可用,windows未测试.html">2010年</a>
  <ul>
    <li><a href="/blog-history/2010/12/PHP在线实现工具linux下可用,windows未测试.html">12月</a>
    <ul>
      <li><a href="/blog-history/2010/12/PHP在线实现工具linux下可用,windows未测试.html">PHP在线实现工具linux下可用,windows未测试</a>
    </ul></li>
    <li><a href="/blog-history/2010/11/PHP利用共享内存构建计数器完成自增数值id生成--适用于网页游戏携带区服号的数值id生成.html">11月</a>
    <ul>
      <li><a href="/blog-history/2010/11/PHP利用共享内存构建计数器完成自增数值id生成--适用于网页游戏携带区服号的数值id生成.html">PHP利用共享内存构建计数器完成自增数值id生成--适用于网页游戏携带区服号的数值id生成</a>
      <li><a href="/blog-history/2010/11/PHPMemcached客户端memcache，memcached比较.html">PHPMemcached客户端memcache，memcached比较</a>
      <li><a href="/blog-history/2010/11/PHPMemcached扩展安装.html">PHPMemcached扩展安装</a>
      <li><a href="/blog-history/2010/11/PHPMemcached客户端官方文档翻译.html">PHPMemcached客户端官方文档翻译</a>
      <li><a href="/blog-history/2010/11/PHP中利用pcntl进行多进程并发控制.html">PHP中利用pcntl进行多进程并发控制</a>
      <li><a href="/blog-history/2010/11/PHP中的uniqid在高并发下的重复问题.html">PHP中的uniqid在高并发下的重复问题</a>
      <li><a href="/blog-history/2010/11/jQuery及jQueryUI内存泄漏问题修复.html">jQuery及jQueryUI内存泄漏问题修复</a>
    </ul></li>
    <li><a href="/blog-history/2010/10/完善eclipse+pdt作php开发中的代码提示能力.html">10月</a>
    <ul>
      <li><a href="/blog-history/2010/10/完善eclipse+pdt作php开发中的代码提示能力.html">完善eclipse+pdt作php开发中的代码提示能力</a>
      <li><a href="/blog-history/2010/10/输出指定格式的数字矩阵2.html">输出指定格式的数字矩阵2</a>
      <li><a href="/blog-history/2010/10/输出指定格式的数字矩阵.html">输出指定格式的数字矩阵</a>
    </ul></li>
    <li><a href="/blog-history/2010/09/sessvars插件源代码解析----一款用window.name产生前台session存储的js插件.html">09月</a>
    <ul>
      <li><a href="/blog-history/2010/09/sessvars插件源代码解析----一款用window.name产生前台session存储的js插件.html">sessvars插件源代码解析----一款用window.name产生前台session存储的js插件</a>
      <li><a href="/blog-history/2010/09/sessvars插件中文文档----一款用window.name产生前台session存储的js插件.html">sessvars插件中文文档----一款用window.name产生前台session存储的js插件</a>
      <li><a href="/blog-history/2010/09/php中Apc和memcache缓存数据性能对比.html">php中Apc和memcache缓存数据性能对比</a>
      <li><a href="/blog-history/2010/09/递归删除utf8文件的bom头该bom头可能导致php产生意外输出.html">递归删除utf8文件的bom头该bom头可能导致php产生意外输出</a>
    </ul></li>
    <li><a href="/blog-history/2010/08/性能测试从零开始--读书笔记.html">08月</a>
    <ul>
      <li><a href="/blog-history/2010/08/性能测试从零开始--读书笔记.html">性能测试从零开始--读书笔记</a>
      <li><a href="/blog-history/2010/08/PHP扩展pcntl进程控制以及信号处理中文文档.html">PHP扩展pcntl进程控制以及信号处理中文文档</a>
      <li><a href="/blog-history/2010/08/PHP中利用pcntl实现多进程模拟多线程实例.html">PHP中利用pcntl实现多进程模拟多线程实例</a>
    </ul></li>
    <li><a href="/blog-history/2010/07/Mysql主从复制的配置双机互为主从.html">07月</a>
    <ul>
      <li><a href="/blog-history/2010/07/Mysql主从复制的配置双机互为主从.html">Mysql主从复制的配置双机互为主从</a>
      <li><a href="/blog-history/2010/07/基于PHP客户端的TokyoTyrantTCH,TCB,TCT,Memcache,Mysql性能测试测试脚本.html">基于PHP客户端的TokyoTyrantTCH,TCB,TCT,Memcache,Mysql性能测试测试脚本</a>
      <li><a href="/blog-history/2010/07/基于PHP客户端的TokyoTyrantTCH,TCB,TCT,Memcache,Mysql性能测试.html">基于PHP客户端的TokyoTyrantTCH,TCB,TCT,Memcache,Mysql性能测试</a>
    </ul></li>
    <li><a href="/blog-history/2010/06/TC官方文档翻译12----编码APITokyoCabinetTokyoTyarnt文档系列.html">06月</a>
    <ul>
      <li><a href="/blog-history/2010/06/TC官方文档翻译12----编码APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译12----编码APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2010/06/TC官方文档翻译11----文件操作APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译11----文件操作APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2010/06/TC官方文档翻译10----其他APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译10----其他APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2010/06/TC官方文档翻译09----内存池对象APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译09----内存池对象APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2010/06/TC官方文档翻译08----内存树数据库APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译08----内存树数据库APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2010/06/TC官方文档翻译07----内存HASH数据库APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译07----内存HASH数据库APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2010/06/TC官方文档翻译06----OrderedTree对象APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译06----OrderedTree对象APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2010/06/TC官方文档翻译05----HashMap对象APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译05----HashMap对象APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2010/06/TC官方文档翻译04----列表对象APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译04----列表对象APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2010/06/TC官方文档翻译03----可扩充字符串APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译03----可扩充字符串APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2010/06/TC官方文档翻译02----基础APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译02----基础APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2010/06/TC官方文档翻译01----TokyoCabinet简介TokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译01----TokyoCabinet简介TokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2010/06/IE7中onpropertychange引发的Stackoverflowatlinexxx问题解决.html">IE7中onpropertychange引发的Stackoverflowatlinexxx问题解决</a>
      <li><a href="/blog-history/2010/06/让jQuery的load方法可以接受ajax选项解决缓存等问题.html">让jQuery的load方法可以接受ajax选项解决缓存等问题</a>
      <li><a href="/blog-history/2010/06/正则表达式中的贪婪与非贪婪的性能问题.html">正则表达式中的贪婪与非贪婪的性能问题</a>
      <li><a href="/blog-history/2010/06/PHP+Mysql+jQuery+fullcalendar实现的微型公司内部订餐系统.html" class="active">PHP+Mysql+jQuery+fullcalendar实现的微型公司内部订餐系统</a>
    </ul></li>
    <li><a href="/blog-history/2010/05/扩展Javascript的String原型,添加汉字截取.html">05月</a>
    <ul>
      <li><a href="/blog-history/2010/05/扩展Javascript的String原型,添加汉字截取.html">扩展Javascript的String原型,添加汉字截取</a>
      <li><a href="/blog-history/2010/05/input标签的汉字长度限制.html">input标签的汉字长度限制</a>
    </ul></li>
    <li><a href="/blog-history/2010/04/HighPerformanceMySQL作者对TokyoTyrant做的性能测试benchmark.html">04月</a>
    <ul>
      <li><a href="/blog-history/2010/04/HighPerformanceMySQL作者对TokyoTyrant做的性能测试benchmark.html">HighPerformanceMySQL作者对TokyoTyrant做的性能测试benchmark</a>
      <li><a href="/blog-history/2010/04/PHP的TokyoTyrant扩展接口API文档PECL.html">PHP的TokyoTyrant扩展接口API文档PECL</a>
    </ul></li>
    <li><a href="/blog-history/2010/03/jQuery实现的Dialog支持模态和拖动.html">03月</a>
    <ul>
      <li><a href="/blog-history/2010/03/jQuery实现的Dialog支持模态和拖动.html">jQuery实现的Dialog支持模态和拖动</a>
      <li><a href="/blog-history/2010/03/css滤镜之light实现的灯光效果..html">css滤镜之light实现的灯光效果.</a>
      <li><a href="/blog-history/2010/03/CSS滤镜笔记------包含Light滤镜方法的使用.html">CSS滤镜笔记------包含Light滤镜方法的使用</a>
      <li><a href="/blog-history/2010/03/基于jQuery实现的焦点轮换效果.html">基于jQuery实现的焦点轮换效果</a>
      <li><a href="/blog-history/2010/03/jQuery.ui.1.7.2中文文档官方文档翻译.html">jQuery.ui.1.7.2中文文档官方文档翻译</a>
      <li><a href="/blog-history/2010/03/jQuery.ui.1.7.2-selectable中文文档.html">jQuery.ui.1.7.2-selectable中文文档</a>
      <li><a href="/blog-history/2010/03/jQuery.ui.1.7.2--Datepicker中文文档.html">jQuery.ui.1.7.2--Datepicker中文文档</a>
      <li><a href="/blog-history/2010/03/JavaScript中的正则替换.html">JavaScript中的正则替换</a>
    </ul></li>
    <li><a href="/blog-history/2010/02/Java-UrlRewrite中文官方文档.html">02月</a>
    <ul>
      <li><a href="/blog-history/2010/02/Java-UrlRewrite中文官方文档.html">Java-UrlRewrite中文官方文档</a>
      <li><a href="/blog-history/2010/02/Struts2整合Json插件时的一个隐蔽BUG-----struts2-json-plugin-2.1.8.html">Struts2整合Json插件时的一个隐蔽BUG-----struts2-json-plugin-2.1.8</a>
      <li><a href="/blog-history/2010/02/Javascript中可以接受参数的延时函数回调.html">Javascript中可以接受参数的延时函数回调</a>
      <li><a href="/blog-history/2010/02/python的闭包3.0之前及之后.html">python的闭包3.0之前及之后</a>
      <li><a href="/blog-history/2010/02/Sitemesh整合struts2使用多个装饰器非的BUG修正.html">Sitemesh整合struts2使用多个装饰器非的BUG修正</a>
    </ul></li>
    <li><a href="/blog-history/2010/01/SiteMesh官方文档翻译含Freemarker但不包括velocity部分.html">01月</a>
    <ul>
      <li><a href="/blog-history/2010/01/SiteMesh官方文档翻译含Freemarker但不包括velocity部分.html">SiteMesh官方文档翻译含Freemarker但不包括velocity部分</a>
      <li><a href="/blog-history/2010/01/通用的分页模型实现..html">通用的分页模型实现.</a>
      <li><a href="/blog-history/2010/01/Servlet中通过过滤器实现统一的手动编码解决中文乱码.html">Servlet中通过过滤器实现统一的手动编码解决中文乱码</a>
      <li><a href="/blog-history/2010/01/struts2的请求处理过程源码分析.html">struts2的请求处理过程源码分析</a>
      <li><a href="/blog-history/2010/01/Struts2中ActionMapping对象的构建过程.html">Struts2中ActionMapping对象的构建过程</a>
      <li><a href="/blog-history/2010/01/IOC的简单实现及其意义..html">IOC的简单实现及其意义.</a>
      <li><a href="/blog-history/2010/01/C语言中的offsetof宏定义在stddef.h头中.html">C语言中的offsetof宏定义在stddef.h头中</a>
      <li><a href="/blog-history/2010/01/生产者消费者问题之Java线程实现.html">生产者消费者问题之Java线程实现</a>
      <li><a href="/blog-history/2010/01/涂鸦你的CSDN博客.html">涂鸦你的CSDN博客</a>
    </ul></li>
  </ul></li>
  <li><a href="/blog-history/2009/12/PHP在线实现工具linux下可用,windows未测试.html">2009年</a>
  <ul>
    <li><a href="/blog-history/2009/12/PHP在线实现工具linux下可用,windows未测试.html">12月</a>
    <ul>
      <li><a href="/blog-history/2009/12/PHP在线实现工具linux下可用,windows未测试.html">PHP在线实现工具linux下可用,windows未测试</a>
    </ul></li>
    <li><a href="/blog-history/2009/11/PHP利用共享内存构建计数器完成自增数值id生成--适用于网页游戏携带区服号的数值id生成.html">11月</a>
    <ul>
      <li><a href="/blog-history/2009/11/PHP利用共享内存构建计数器完成自增数值id生成--适用于网页游戏携带区服号的数值id生成.html">PHP利用共享内存构建计数器完成自增数值id生成--适用于网页游戏携带区服号的数值id生成</a>
      <li><a href="/blog-history/2009/11/PHPMemcached客户端memcache，memcached比较.html">PHPMemcached客户端memcache，memcached比较</a>
      <li><a href="/blog-history/2009/11/PHPMemcached扩展安装.html">PHPMemcached扩展安装</a>
      <li><a href="/blog-history/2009/11/PHPMemcached客户端官方文档翻译.html">PHPMemcached客户端官方文档翻译</a>
      <li><a href="/blog-history/2009/11/PHP中利用pcntl进行多进程并发控制.html">PHP中利用pcntl进行多进程并发控制</a>
      <li><a href="/blog-history/2009/11/PHP中的uniqid在高并发下的重复问题.html">PHP中的uniqid在高并发下的重复问题</a>
      <li><a href="/blog-history/2009/11/jQuery及jQueryUI内存泄漏问题修复.html">jQuery及jQueryUI内存泄漏问题修复</a>
    </ul></li>
    <li><a href="/blog-history/2009/10/完善eclipse+pdt作php开发中的代码提示能力.html">10月</a>
    <ul>
      <li><a href="/blog-history/2009/10/完善eclipse+pdt作php开发中的代码提示能力.html">完善eclipse+pdt作php开发中的代码提示能力</a>
      <li><a href="/blog-history/2009/10/输出指定格式的数字矩阵2.html">输出指定格式的数字矩阵2</a>
      <li><a href="/blog-history/2009/10/输出指定格式的数字矩阵.html">输出指定格式的数字矩阵</a>
    </ul></li>
    <li><a href="/blog-history/2009/09/sessvars插件源代码解析----一款用window.name产生前台session存储的js插件.html">09月</a>
    <ul>
      <li><a href="/blog-history/2009/09/sessvars插件源代码解析----一款用window.name产生前台session存储的js插件.html">sessvars插件源代码解析----一款用window.name产生前台session存储的js插件</a>
      <li><a href="/blog-history/2009/09/sessvars插件中文文档----一款用window.name产生前台session存储的js插件.html">sessvars插件中文文档----一款用window.name产生前台session存储的js插件</a>
      <li><a href="/blog-history/2009/09/php中Apc和memcache缓存数据性能对比.html">php中Apc和memcache缓存数据性能对比</a>
      <li><a href="/blog-history/2009/09/递归删除utf8文件的bom头该bom头可能导致php产生意外输出.html">递归删除utf8文件的bom头该bom头可能导致php产生意外输出</a>
    </ul></li>
    <li><a href="/blog-history/2009/08/性能测试从零开始--读书笔记.html">08月</a>
    <ul>
      <li><a href="/blog-history/2009/08/性能测试从零开始--读书笔记.html">性能测试从零开始--读书笔记</a>
      <li><a href="/blog-history/2009/08/PHP扩展pcntl进程控制以及信号处理中文文档.html">PHP扩展pcntl进程控制以及信号处理中文文档</a>
      <li><a href="/blog-history/2009/08/PHP中利用pcntl实现多进程模拟多线程实例.html">PHP中利用pcntl实现多进程模拟多线程实例</a>
    </ul></li>
    <li><a href="/blog-history/2009/07/Mysql主从复制的配置双机互为主从.html">07月</a>
    <ul>
      <li><a href="/blog-history/2009/07/Mysql主从复制的配置双机互为主从.html">Mysql主从复制的配置双机互为主从</a>
      <li><a href="/blog-history/2009/07/基于PHP客户端的TokyoTyrantTCH,TCB,TCT,Memcache,Mysql性能测试测试脚本.html">基于PHP客户端的TokyoTyrantTCH,TCB,TCT,Memcache,Mysql性能测试测试脚本</a>
      <li><a href="/blog-history/2009/07/基于PHP客户端的TokyoTyrantTCH,TCB,TCT,Memcache,Mysql性能测试.html">基于PHP客户端的TokyoTyrantTCH,TCB,TCT,Memcache,Mysql性能测试</a>
    </ul></li>
    <li><a href="/blog-history/2009/06/TC官方文档翻译12----编码APITokyoCabinetTokyoTyarnt文档系列.html">06月</a>
    <ul>
      <li><a href="/blog-history/2009/06/TC官方文档翻译12----编码APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译12----编码APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2009/06/TC官方文档翻译11----文件操作APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译11----文件操作APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2009/06/TC官方文档翻译10----其他APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译10----其他APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2009/06/TC官方文档翻译09----内存池对象APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译09----内存池对象APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2009/06/TC官方文档翻译08----内存树数据库APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译08----内存树数据库APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2009/06/TC官方文档翻译07----内存HASH数据库APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译07----内存HASH数据库APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2009/06/TC官方文档翻译06----OrderedTree对象APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译06----OrderedTree对象APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2009/06/TC官方文档翻译05----HashMap对象APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译05----HashMap对象APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2009/06/TC官方文档翻译04----列表对象APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译04----列表对象APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2009/06/TC官方文档翻译03----可扩充字符串APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译03----可扩充字符串APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2009/06/TC官方文档翻译02----基础APITokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译02----基础APITokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2009/06/TC官方文档翻译01----TokyoCabinet简介TokyoCabinetTokyoTyarnt文档系列.html">TC官方文档翻译01----TokyoCabinet简介TokyoCabinetTokyoTyarnt文档系列</a>
      <li><a href="/blog-history/2009/06/IE7中onpropertychange引发的Stackoverflowatlinexxx问题解决.html">IE7中onpropertychange引发的Stackoverflowatlinexxx问题解决</a>
      <li><a href="/blog-history/2009/06/让jQuery的load方法可以接受ajax选项解决缓存等问题.html">让jQuery的load方法可以接受ajax选项解决缓存等问题</a>
      <li><a href="/blog-history/2009/06/正则表达式中的贪婪与非贪婪的性能问题.html">正则表达式中的贪婪与非贪婪的性能问题</a>
      <li><a href="/blog-history/2009/06/PHP+Mysql+jQuery+fullcalendar实现的微型公司内部订餐系统.html" class="active">PHP+Mysql+jQuery+fullcalendar实现的微型公司内部订餐系统</a>
    </ul></li>
    <li><a href="/blog-history/2009/05/扩展Javascript的String原型,添加汉字截取.html">05月</a>
    <ul>
      <li><a href="/blog-history/2009/05/扩展Javascript的String原型,添加汉字截取.html">扩展Javascript的String原型,添加汉字截取</a>
      <li><a href="/blog-history/2009/05/input标签的汉字长度限制.html">input标签的汉字长度限制</a>
    </ul></li>
    <li><a href="/blog-history/2009/04/HighPerformanceMySQL作者对TokyoTyrant做的性能测试benchmark.html">04月</a>
    <ul>
      <li><a href="/blog-history/2009/04/HighPerformanceMySQL作者对TokyoTyrant做的性能测试benchmark.html">HighPerformanceMySQL作者对TokyoTyrant做的性能测试benchmark</a>
      <li><a href="/blog-history/2009/04/PHP的TokyoTyrant扩展接口API文档PECL.html">PHP的TokyoTyrant扩展接口API文档PECL</a>
    </ul></li>
    <li><a href="/blog-history/2009/03/jQuery实现的Dialog支持模态和拖动.html">03月</a>
    <ul>
      <li><a href="/blog-history/2009/03/jQuery实现的Dialog支持模态和拖动.html">jQuery实现的Dialog支持模态和拖动</a>
      <li><a href="/blog-history/2009/03/css滤镜之light实现的灯光效果..html">css滤镜之light实现的灯光效果.</a>
      <li><a href="/blog-history/2009/03/CSS滤镜笔记------包含Light滤镜方法的使用.html">CSS滤镜笔记------包含Light滤镜方法的使用</a>
      <li><a href="/blog-history/2009/03/基于jQuery实现的焦点轮换效果.html">基于jQuery实现的焦点轮换效果</a>
      <li><a href="/blog-history/2009/03/jQuery.ui.1.7.2中文文档官方文档翻译.html">jQuery.ui.1.7.2中文文档官方文档翻译</a>
      <li><a href="/blog-history/2009/03/jQuery.ui.1.7.2-selectable中文文档.html">jQuery.ui.1.7.2-selectable中文文档</a>
      <li><a href="/blog-history/2009/03/jQuery.ui.1.7.2--Datepicker中文文档.html">jQuery.ui.1.7.2--Datepicker中文文档</a>
      <li><a href="/blog-history/2009/03/JavaScript中的正则替换.html">JavaScript中的正则替换</a>
    </ul></li>
    <li><a href="/blog-history/2009/02/Java-UrlRewrite中文官方文档.html">02月</a>
    <ul>
      <li><a href="/blog-history/2009/02/Java-UrlRewrite中文官方文档.html">Java-UrlRewrite中文官方文档</a>
      <li><a href="/blog-history/2009/02/Struts2整合Json插件时的一个隐蔽BUG-----struts2-json-plugin-2.1.8.html">Struts2整合Json插件时的一个隐蔽BUG-----struts2-json-plugin-2.1.8</a>
      <li><a href="/blog-history/2009/02/Javascript中可以接受参数的延时函数回调.html">Javascript中可以接受参数的延时函数回调</a>
      <li><a href="/blog-history/2009/02/python的闭包3.0之前及之后.html">python的闭包3.0之前及之后</a>
      <li><a href="/blog-history/2009/02/Sitemesh整合struts2使用多个装饰器非的BUG修正.html">Sitemesh整合struts2使用多个装饰器非的BUG修正</a>
    </ul></li>
    <li><a href="/blog-history/2009/01/SiteMesh官方文档翻译含Freemarker但不包括velocity部分.html">01月</a>
    <ul>
      <li><a href="/blog-history/2009/01/SiteMesh官方文档翻译含Freemarker但不包括velocity部分.html">SiteMesh官方文档翻译含Freemarker但不包括velocity部分</a>
      <li><a href="/blog-history/2009/01/通用的分页模型实现..html">通用的分页模型实现.</a>
      <li><a href="/blog-history/2009/01/Servlet中通过过滤器实现统一的手动编码解决中文乱码.html">Servlet中通过过滤器实现统一的手动编码解决中文乱码</a>
      <li><a href="/blog-history/2009/01/struts2的请求处理过程源码分析.html">struts2的请求处理过程源码分析</a>
      <li><a href="/blog-history/2009/01/Struts2中ActionMapping对象的构建过程.html">Struts2中ActionMapping对象的构建过程</a>
      <li><a href="/blog-history/2009/01/IOC的简单实现及其意义..html">IOC的简单实现及其意义.</a>
      <li><a href="/blog-history/2009/01/C语言中的offsetof宏定义在stddef.h头中.html">C语言中的offsetof宏定义在stddef.h头中</a>
      <li><a href="/blog-history/2009/01/生产者消费者问题之Java线程实现.html">生产者消费者问题之Java线程实现</a>
      <li><a href="/blog-history/2009/01/涂鸦你的CSDN博客.html">涂鸦你的CSDN博客</a>
    </ul></li>
  </ul></li>
</ul>
        </aside>
        <!-- END Sidebar -->


        <!-- Main content -->
        <article class="col-md-9 col-sm-9 main-content" role="main">
          
          <header>
            <h1></h1>
            <p></p>
<ol class="toc">
</li></ol>

          </header>

          <section>
<p>需求相关: 公司20人左右, 每天中午, 下午两次订餐, 都是助理在群里说&quot;开始订餐&quot;, 然后大家报菜名, 然后助理统计, 打电话.  今天, 助理说&quot;开始订餐, 订什么密聊...&quot;, 突然就想做这么个东西....
 
耗时: 4.5小时
 
评估: 时间太短, 不能做到很好, 没有什么输入验证之类, 就自己公司内部一点人, 用用应该没啥问题.....bug估计很多...应该是没时间改bug的, 不过有不足之处请大家提出, 互相学习.
 
提醒: 由于我这边和服务器有个时差, 所以, 里面有代码在倒时差.....另外, 13点之前被认为是上午, 之后包括13点被认为是下午, 一天两次.
 
本文涉及到的插件:<a href="http://jquery.com">jQuery</a>,<a href="http://jqueryui.com">jQuery.UI</a>,<a href="http://arshaw.com/fullcalendar">fullcalendar</a>
 
数据库创建:
CREATE TABLE USER
(
    ID INT PRIMARY KEY AUTO_INCREMENT,
    NAME VARCHAR(100)
);
CREATE TABLE ITEM
(
    ID INT PRIMARY KEY AUTO_INCREMENT,
    USER_ID INT,
    FOOD TINYBOLB,
    ORDER_TIME TIMESTAMP
);
ALTER TABLE ITEM ADD FOREIGN KEY(USER_ID) REFERENCES USER(ID) ON DELETE CASCADE;
 
一个实体的基类, 封装的不太好...呵呵</p>

<pre lang="php"><code>&amp;lt;?php
/**
 * 实体基类
 * @author selfimpr
 * @blog http://blog.csdn.net/lgg201
 * @email goosman.lei@gmail.com
 *
 */
class Entity {
    protected static $_mapping = array();
    public static function getField($column_name) {
        return self::$_mapping[$column_name] ? self::$_mapping[$column_name] : $column_name;
    }
    public function set($field, $value) {
        $method = &#39;set&#39;.ucwords($field);
        return $this-&amp;gt;$method($value);
    }
    public function get() {
        $method = &#39;get&#39;.ucwords($field);
        return $this-&amp;gt;$method();
    }
}
?&amp;gt;
</code></pre>

<p> 
用户类(这个里面是没有权限, 登录的概念的, 就公司内部一个小东西)</p>

<pre lang="php"><code>&amp;lt;?php
require_once &#39;./Entity.php&#39;;
/**
 * 用户实体类
 * @author selfimpr
 * @blog http://blog.csdn.net/lgg201
 * @email goosman.lei@gmail.com
 *
 */
class User extends Entity {
    private $id;
    private $name;

    public function User($id = NULL, $name = NULL) {
        $this-&amp;gt;id = $id;
        $this-&amp;gt;name = $name;
    }

    public function getId() {
        return $this-&amp;gt;id;
    }
    public function setId($id) {
        $this-&amp;gt;id = $id;
        return $this;
    }
    public function getName() {
        return $this-&amp;gt;name;
    }
    public function setName($name) {
        $this-&amp;gt;name = $name;
        return $this;
    }
}
?&amp;gt;
</code></pre>

<p> 
订餐订单项类</p>

<pre lang="php"><code>&amp;lt;?php
require_once &#39;./Entity.php&#39;;
/**
 * 订餐订单
 * @author selfimpr
 * @blog http://blog.csdn.net/lgg201
 * @email goosman.lei@gmail.com
 *
 */
class Item extends Entity {
    private $id;
    private $user;
    private $food;
    private $orderTime;

    public function Item($id = NULL, $food = NULL, $orderTime = NULL) {
        $this-&amp;gt;id = $id;
        $this-&amp;gt;food = $food;
        $this-&amp;gt;orderTime = $orderTime;
    }

    public function getId() {
        return $this-&amp;gt;id;
    }
    public function setId($id) {
        $this-&amp;gt;id = $id;
        return $this;
    }
    public function getUser() {
        return $this-&amp;gt;user;
    }
    public function setUser($user) {
        $this-&amp;gt;user = $user;
        return $this;
    }
    public function getFood() {
        return $this-&amp;gt;food;
    }
    public function setFood($food) {
        $this-&amp;gt;food = $food;
        return $this;
    }
    public function getOrderTime() {
        return $this-&amp;gt;orderTime;
    }
    public function setOrderTime($orderTime) {
        $this-&amp;gt;orderTime = $orderTime;
        return $this;
    }
}
?&amp;gt;
</code></pre>

<p> 
数据库工具类</p>

<pre lang="php"><code>&amp;lt;?php
/**
 * Mysql工具类
 * @author selfimpr
 * @blog http://blog.csdn.net/lgg201
 * @email goosman.lei@gmail.com
 *
 */
class Mysql {
    private $host;
    private $username;
    private $password;
    private $db_name;
    private $character_set;

    public function __construct(
            $host = &amp;quot;192.168.2.10&amp;quot;,
            $username = &amp;quot;root&amp;quot;, 
            $password = &amp;quot;jhx&amp;quot;, 
            $db_name = &amp;quot;eat&amp;quot;, 
            $character_set = &amp;quot;GBK&amp;quot;) {
        $this-&amp;gt;host = $host;
        $this-&amp;gt;username = $username;
        $this-&amp;gt;password = $password;
        $this-&amp;gt;db_name = $db_name;
        $this-&amp;gt;character_set = $character_set;
    }

    public function getConn() {
        $conn = mysql_connect($this-&amp;gt;host, $this-&amp;gt;username, $this-&amp;gt;password) or die(&#39;数据库连接失败&#39;);
        mysql_select_db($this-&amp;gt;db_name, $conn);
        mysql_set_charset($this-&amp;gt;character_set, $conn);
        return $conn;
    }

    /**
     * 
     * @param $sql 查询用的sql
     * @param $result 查询得到的结果集, 如果UPDATE, INSERT, DELETE 不同提供这个参数
     * @return SELECT 返回查询得到的条数, UPDATE, INSERT, DELETE返回bool型, 标识是否执行成功.
     */
    public function execute($sql) {
        $conn = $this-&amp;gt;getConn();
        $resultset = mysql_query($sql, $conn) or die(mysql_error($conn));
        if(!is_bool($resultset)) {
            while($line = mysql_fetch_assoc($resultset)) {
                $result[] = $line;
            }
        } else {
            $result = $resultset;
        }

        mysql_close($conn) or die(mysql_error($conn));

//      echo &amp;quot;【&amp;quot;.$sql.&amp;quot;】 excute success!&amp;lt;br /&amp;gt;&amp;quot;;

        return $result;
    }
}
?&amp;gt;
</code></pre>

<p> 
业务逻辑(没时间了就写一个文件里了)</p>

<pre lang="php"><code>&amp;lt;?php
require_once &#39;./mysql_util.php&#39;;
require_once &#39;./User.php&#39;;
require_once &#39;./Item.php&#39;;
/**
 * 获取当前库中所有的用户
 * @return unknown_type
 */
function getUsers() {
    $util = new Mysql();
    $users_data = $util-&amp;gt;execute(&amp;quot;SELECT * FROM USER&amp;quot;);
    foreach($users_data as $index =&amp;gt; $data) {
        $user = new User();
        foreach($data as $column_name =&amp;gt; $value) {
            $user-&amp;gt;set(User::getField($column_name), $value);
        }
        $users[] = $user;
    }
    return $users;
}
/**
 * 根据名字增加一个用户
 * @param $name
 * @return unknown_type
 */
function addUser($name) {
    $util = new Mysql();
    $name = iconv(&amp;quot;UTF-8&amp;quot;, &amp;quot;gbk&amp;quot; , $name);
    return $util-&amp;gt;execute(&amp;quot;INSERT INTO USER VALUES(NULL, &#39;$name&#39;)&amp;quot;);
}
/**
 * 根据id删除一个用户
 * @param $id
 * @return unknown_type
 */
function deleteUser($id) {
    $util = new Mysql();
    return $util-&amp;gt;execute(&amp;quot;DELETE FROM USER WHERE ID = $id&amp;quot;);
}
/**
 * 根据id修改姓名
 * @param $id
 * @param $name
 * @return unknown_type
 */
function updateUser($id, $name) {
    $util = new Mysql();
    return $util-&amp;gt;execute(&amp;quot;UPDATE USER SET NAME = &#39;$name&#39; WHERE ID = $id&amp;quot;);
}
/**
 * 插入一条订餐记录
 * @param $user_id
 * @param $food
 * @return unknown_type
 */
function addItem($user_id, $food, $ordertime) {
    $util = new Mysql();
    $year = date(&#39;Y&#39;, $ordertime);
    $month = date(&#39;n&#39;, $ordertime);
    $day = date(&#39;j&#39;, $ordertime);
    $hour = (date(&#39;G&#39;, $ordertime) + 8) % 24;
    $flag = $hour &amp;lt; 13;
    $item = getItemByTimeAndUser($year, $month, $day, $flag, $user_id);
    $ordertime = &amp;quot;$year-$month-$day $hour:00:00&amp;quot;;
    $item &amp;amp;&amp;amp; ($item = $item[0]) &amp;amp;&amp;amp; ($flag = $flag ? &#39; &amp;lt; &#39; : &#39; &amp;gt;= &#39;);
    return $item
            ? $util-&amp;gt;execute(&amp;quot;UPDATE ITEM SET FOOD = &#39;$food&#39; WHERE USER_ID = $user_id AND YEAR(ORDER_TIME) = $year AND MONTH(ORDER_TIME) = $month AND DAY(ORDER_TIME) = $day AND HOUR(ORDER_TIME) $flag 13&amp;quot;)
            : $util-&amp;gt;execute(&amp;quot;INSERT INTO ITEM(USER_ID, FOOD, ORDER_TIME) VALUES($user_id, &#39;$food&#39;, &#39;$ordertime&#39;)&amp;quot;);
}
/**
 * 获取某天上午或下午的订餐
 * @param $year
 * @param $month
 * @param $day
 * @param $flag 上午true下午false
 * @return unknown_type
 */
function getItemsByTime($year, $month, $day, $flag) {
    $util = new Mysql();
    $flag = $flag ? &#39; &amp;lt; &#39; : &#39; &amp;gt;= &#39;;
    $item_datas = $util-&amp;gt;execute(&amp;quot;SELECT ITEM.*, USER.NAME FROM ITEM JOIN USER ON ITEM.USER_ID = USER.ID WHERE YEAR(ORDER_TIME) = $year AND MONTH(ORDER_TIME) = $month AND DAY(ORDER_TIME) = $day AND HOUR(ORDER_TIME) $flag 13&amp;quot;);
    if(empty($item_datas)) return array();
    foreach($item_datas as $index =&amp;gt; $data) {
        $item = new Item();
        $items[$data[&#39;USER_ID&#39;]] = $item-&amp;gt;setId($data[&#39;ID&#39;])
                        -&amp;gt;setUser(new User($data[&#39;USER_ID&#39;], $data[&#39;NAME&#39;]))
                        -&amp;gt;setFood($data[&#39;FOOD&#39;])
                        -&amp;gt;setOrderTime(date($data[&#39;ORDER_TIME&#39;]));
    }
    return $items;
}
/**
 * 根据用户id, 时间, 获取其订饭记录
 * @param $year
 * @param $month
 * @param $day
 * @param $flag
 * @param $user_id
 * @return unknown_type
 */
function getItemByTimeAndUser($year, $month, $day, $flag, $user_id) {
    $util = new Mysql();
    $flag = $flag ? &#39; &amp;lt; &#39; : &#39; &amp;gt;= &#39;;
    $item_datas = $util-&amp;gt;execute(&amp;quot;SELECT ITEM.*, USER.NAME FROM ITEM JOIN USER ON ITEM.USER_ID = USER.ID WHERE YEAR(ORDER_TIME) = $year AND MONTH(ORDER_TIME) = $month AND DAY(ORDER_TIME) = $day AND HOUR(ORDER_TIME) $flag 13 AND ITEM.USER_ID = $user_id&amp;quot;);
    echo &amp;quot;SELECT ITEM.*, USER.NAME FROM ITEM JOIN USER ON ITEM.USER_ID = USER.ID WHERE YEAR(ORDER_TIME) = $year AND MONTH(ORDER_TIME) = $month AND DAY(ORDER_TIME) = $day AND HOUR(ORDER_TIME) $flag 13 AND ITEM.USER_ID = $user_id&amp;quot;;
    if(empty($item_datas)) return array();
    foreach($item_datas as $index =&amp;gt; $data) {
        $item = new Item();
        $items[] = $item-&amp;gt;setId($data[&#39;ID&#39;])
                        -&amp;gt;setUser(new User($data[&#39;USER_ID&#39;], $data[&#39;NAME&#39;]))
                        -&amp;gt;setFood($data[&#39;FOOD&#39;])
                        -&amp;gt;setOrderTime(date($data[&#39;ORDER_TIME&#39;]));
    }
    return $items;
}
?&amp;gt;
</code></pre>

<p> 
单元测试</p>

<pre lang="php"><code>&amp;lt;meta http-equiv=&amp;quot;Content-Type&amp;quot; content=&amp;quot;text/html; charset=UTF-8&amp;quot;&amp;gt;
&amp;lt;?php
require_once &#39;./mysql_util.php&#39;;
require_once &#39;./bussiness.php&#39;;
/**
 * 本程序业务逻辑之下部分的单元测试
 * @author selfimpr
 * @blog http://blog.csdn.net/lgg201
 * @email goosman.lei@gmail.com
 */

/**
 * 测试用例1: 数据库连接
 */
//$util = new Mysql();
//$res = $util-&amp;gt;execute(&#39;SHOW TABLES&#39;);
//print_r($res);
//echo &#39;&amp;lt;br&amp;gt;==========数据库连接成功===========&amp;lt;br&amp;gt;&#39;;
/**
 * 测试用例2: 获取所有用户
 */
//var_dump(getUsers());
/**
 * 测试用例3: 增加用户
 */
//var_dump(addUser(&amp;quot;张三&amp;quot;));
/**
 * 测试用例4: 删除用户
 */
//var_dump(deleteUser(4));
/**
 * 测试用例5: 更新用户
 */
//var_dump(updateUser(5, &#39;李四&#39;));
/**
 * 测试用例6: 插入订餐项
 */
//var_dump(addItem(1, &#39;辣子鸡丁&#39;));
/**
 * 测试用例7: 获取某天上午或下午订餐
 */
//var_dump(getItemsByTime(2010, 6, 4, false));
/**
 * 测试用例8: 获取某人某天上午或下午订餐
 */
//var_dump(getItemByTimeAndUser(date(&#39;Y&#39;), date(&#39;m&#39;), date(&#39;d&#39;), date(&#39;H&#39;) + 8 &amp;lt; 13, 1));
?&amp;gt;
</code></pre>

<p> 
添加用户的Ajax接口</p>

<pre lang="php"><code>&amp;lt;?php
require_once &#39;./bussiness.php&#39;;
/**
 * 添加用户ajax请求
 */
return addUser($_POST[&#39;name&#39;]);
?&amp;gt;
</code></pre>

<p> 
删除用户的ajax接口</p>

<pre lang="php"><code>&amp;lt;?php
require_once &#39;./bussiness.php&#39;;
/**
 * 删除用户ajax请求
 */
return deleteUser($_POST[&#39;id&#39;]);
?&amp;gt;
</code></pre>

<p> 
提交订餐项的ajax接口</p>

<pre lang="php"><code>&amp;lt;?php
require_once &#39;./bussiness.php&#39;;
$userId = $_POST[&#39;userId&#39;];
$food = $_POST[&#39;food&#39;];
$t = $_POST[&#39;t&#39;];
/**
 * 提交一个订餐请求的ajax地址
 */
echo (string)addItem($userId, $food, $t);
?&amp;gt;
</code></pre>

<p> 
展现订餐项的视图:</p>

<pre lang="php"><code>&amp;lt;?php
/**
 * 展现某个订餐时间的所有订餐项
 */
require_once &#39;./bussiness.php&#39;;
$t = $_GET[&#39;t&#39;];
$year = date(&#39;Y&#39;, $t);
$month = date(&#39;n&#39;, $t);
$day = date(&#39;j&#39;, $t);
$hour = (date(&#39;G&#39;, $t) + 8) % 24;
$flag = $hour &amp;lt; 13;
$items = getItemsByTime($year, $month, $day, $flag);
$users = getUsers();
?&amp;gt;
&amp;lt;meta http-equiv=&amp;quot;Content-Type&amp;quot; content=&amp;quot;text/html; charset=UTF-8&amp;quot;&amp;gt;
&amp;lt;table cellspacing=&amp;quot;0&amp;quot;&amp;gt;
&amp;lt;tr&amp;gt;
    &amp;lt;th colspan=&amp;quot;7&amp;quot;&amp;gt;谁填谁的, 填完&amp;quot;吃啥&amp;quot;点下后面的&amp;quot;就吃这个&amp;quot;&amp;lt;/th&amp;gt;
&amp;lt;/tr&amp;gt;
&amp;lt;tr align=&amp;quot;center&amp;quot;&amp;gt;
    &amp;lt;td&amp;gt;名字&amp;lt;/td&amp;gt;
    &amp;lt;td&amp;gt;吃啥&amp;lt;/td&amp;gt;
    &amp;lt;td&amp;gt;操作&amp;lt;/td&amp;gt;
    &amp;lt;td&amp;gt;分水岭&amp;lt;/td&amp;gt;
    &amp;lt;td&amp;gt;名字&amp;lt;/td&amp;gt;
    &amp;lt;td&amp;gt;吃啥&amp;lt;/td&amp;gt;
    &amp;lt;td&amp;gt;操作&amp;lt;/td&amp;gt;
&amp;lt;/tr&amp;gt;
&amp;lt;?php 
foreach($users as $index =&amp;gt; $user) {
    if($index % 2 !== 0) continue;
?&amp;gt;
&amp;lt;tr class=&amp;quot;ctrl-record&amp;quot; userId=&amp;quot;&amp;lt;?php echo $user-&amp;gt;getId(); ?&amp;gt;&amp;quot;&amp;gt;
    &amp;lt;td&amp;gt;&amp;lt;?php echo iconv(&#39;gbk&#39;, &#39;utf-8&#39;, $user-&amp;gt;getName()); ?&amp;gt;&amp;lt;/td&amp;gt;
    &amp;lt;td&amp;gt;&amp;lt;input class=&amp;quot;food-input ctrl-food-input&amp;quot; type=&amp;quot;text&amp;quot; value=&amp;quot;&amp;lt;?php echo $items[$user-&amp;gt;getId()] ? $items[$user-&amp;gt;getId()]-&amp;gt;getFood() : &#39;&amp;nbsp;&#39;; ?&amp;gt;&amp;quot;&amp;gt;&amp;lt;/td&amp;gt;
    &amp;lt;td&amp;gt;&amp;lt;button class=&amp;quot;ctrl-submit&amp;quot;&amp;gt;就吃这个&amp;lt;/button&amp;gt;&amp;lt;/td&amp;gt;
    &amp;lt;td&amp;gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;-|分|-&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;lt;/td&amp;gt;
    &amp;lt;td&amp;gt;&amp;lt;?php if($users[$index + 1]) echo iconv(&#39;gbk&#39;, &#39;utf-8&#39;, $users[$index + 1]-&amp;gt;getName()); else echo &#39;&amp;nbsp;&#39;; ?&amp;gt;&amp;lt;/td&amp;gt;
    &amp;lt;td&amp;gt;&amp;lt;input class=&amp;quot;food-input ctrl-food-input&amp;quot; type=&amp;quot;text&amp;quot; value=&amp;quot;&amp;lt;?php if($users[$index + 1]) echo $items[$users[$index + 1]-&amp;gt;getId()] ? $items[$users[$index + 1]-&amp;gt;getId()]-&amp;gt;getFood() : &#39;&amp;nbsp;&#39;; else echo &#39;&amp;nbsp;&#39;; ?&amp;gt;&amp;quot;&amp;gt;&amp;lt;/td&amp;gt;
    &amp;lt;td&amp;gt;&amp;lt;button class=&amp;quot;ctrl-submit&amp;quot;&amp;gt;就吃这个&amp;lt;/button&amp;gt;&amp;lt;/td&amp;gt;
&amp;lt;/tr&amp;gt;
&amp;lt;?php
}
?&amp;gt;
&amp;lt;/table&amp;gt;
</code></pre>

<p> 
展现所有用户的视图</p>

<pre lang="php"><code>&amp;lt;?php
require_once &#39;./bussiness.php&#39;;
/**
 * 系统中用户的管理界面
 * @author selfimpr
 * @blog http://blog.csdn.net/lgg201
 * @email goosman.lei@gmail.com
 */
$users = getUsers();
?&amp;gt;
&amp;lt;meta http-equiv=&amp;quot;Content-Type&amp;quot; content=&amp;quot;text/html; charset=UTF-8&amp;quot;&amp;gt;
&amp;lt;input type=&amp;quot;text&amp;quot; id=&amp;quot;new_user_input&amp;quot; onkeyup=&amp;quot;javascript: event.keyCode == 13 &amp;amp;&amp;amp; $(&#39;#new_user&#39;).click();&amp;quot; /&amp;gt;&amp;lt;button id=&amp;quot;new_user&amp;quot;&amp;gt;新增&amp;lt;/button&amp;gt;
&amp;lt;?php 
if(empty($users)) return ;
?&amp;gt;
&amp;lt;div style=&amp;quot;width: 300px; clear: both;&amp;quot;&amp;gt;
&amp;lt;?php 
foreach($users as $index =&amp;gt; $user) {
?&amp;gt;
&amp;lt;div class=&amp;quot;ctrl-record&amp;quot; style=&amp;quot;width: 120px; padding: 10px; height: 70px; border: 1px solid #808080; background: #E8E8E8; float: left; display: block; margin: 5px;&amp;quot; userId=&amp;quot;&amp;lt;?php echo $user-&amp;gt;getId(); ?&amp;gt;&amp;quot;&amp;gt;
    &amp;lt;input type=&amp;quot;text&amp;quot; value=&amp;quot;&amp;lt;?php echo iconv(&#39;gbk&#39;, &#39;utf-8&#39;, $user-&amp;gt;getName()); ?&amp;gt;&amp;quot; style=&amp;quot;display: block; width: 100px; height: 20px; line-height: 20px;&amp;quot;/&amp;gt;
    &amp;lt;button class=&amp;quot;ctrl-del-user&amp;quot; style=&amp;quot;width: 100px; height: 25px; margin-top: 5px;&amp;quot;&amp;gt;删除&amp;lt;/button&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;?php
}
?&amp;gt;
</code></pre>

<p> 
系统的入口index.php</p>

<pre lang="php"><code>&amp;lt;?php 
/**
 * 程序入口
 */
?&amp;gt;
&amp;lt;!DOCTYPE html PUBLIC &amp;quot;-//W3C//DTD XHTML 1.0 Strict//EN&amp;quot;&amp;quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&amp;quot;&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;meta http-equiv=&amp;quot;Content-Type&amp;quot; content=&amp;quot;text/html; charset=UTF-8&amp;quot;&amp;gt;
&amp;lt;link rel=&#39;stylesheet&#39; type=&#39;text/css&#39; href=&amp;quot;./styles/ui.all.css&amp;quot; mce_href=&amp;quot;styles/ui.all.css&amp;quot; /&amp;gt;
&amp;lt;link rel=&#39;stylesheet&#39; type=&#39;text/css&#39; href=&amp;quot;./styles/fullcalendar.css&amp;quot; mce_href=&amp;quot;styles/fullcalendar.css&amp;quot; /&amp;gt;
&amp;lt;link rel=&#39;stylesheet&#39; type=&#39;text/css&#39; href=&amp;quot;./styles/eat.css&amp;quot; mce_href=&amp;quot;styles/eat.css&amp;quot; /&amp;gt;
&amp;lt;mce:script type=&#39;text/javascript&#39; src=&amp;quot;./scripts/jquery.js&amp;quot; mce_src=&amp;quot;scripts/jquery.js&amp;quot;&amp;gt;&amp;lt;/mce:script&amp;gt;
&amp;lt;mce:script type=&#39;text/javascript&#39; src=&amp;quot;./scripts/jquery-ui-1.7.2.custom.js&amp;quot; mce_src=&amp;quot;scripts/jquery-ui-1.7.2.custom.js&amp;quot;&amp;gt;&amp;lt;/mce:script&amp;gt;
&amp;lt;mce:script type=&#39;text/javascript&#39; src=&amp;quot;./scripts/fullcalendar.js&amp;quot; mce_src=&amp;quot;scripts/fullcalendar.js&amp;quot;&amp;gt;&amp;lt;/mce:script&amp;gt;
&amp;lt;mce:script type=&#39;text/javascript&#39; src=&amp;quot;./scripts/eat.js&amp;quot; mce_src=&amp;quot;scripts/eat.js&amp;quot;&amp;gt;&amp;lt;/mce:script&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;button id=&amp;quot;maintain&amp;quot;&amp;gt;加人&amp;lt;/button&amp;gt;
&amp;lt;div id=&#39;calendar&#39; class=&amp;quot;wrapper&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
</code></pre>

<p> 
系统涉及的javascript: eat.js</p>

<pre lang="javascript"><code>$(document).ready(function() {
    /**
     * 计算一月有多少天
     */
    function daysInMonth(month,year) {
        var dd = new Date(year, month, 0);
        return dd.getDate();
    } 
    /**
     * 预置日历初始化使用日期, 当天
     */
    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();

    /**
     * 初始化日历中每天里面的上下午日程
     */
    var day_nums = daysInMonth(m, y);
    var events = new Array();
    for(var i = 1; i &amp;lt; day_nums; i ++) {
        events.push({
            title: &#39;上午吃啥&#39;, 
            start: new Date(y, m, i, 1), 
            end: new Date(y, m, i, 11)
        });
        events.push({
            title: &#39;下午吃啥&#39;, 
            start: new Date(y, m, i, 14), 
            end: new Date(y, m, i, 23)
        });
    }

    /**
     * 初始化日历
     */
    $(&#39;#calendar&#39;).fullCalendar({
        year: y, 
        month: m, 
        day: d, 
        defaultView: &#39;month&#39;, 
        events: events, 
        header: {left: &#39;&#39;, center: &#39;title&#39;, right: &#39;&#39;}, 
        aspectRatio: 1.6, 
        weekMode: &#39;variable&#39;, 
        eventClick: function(calEvent, jsEvent, view) {
            /**
             * 日程被点击后, 加载该时段的订餐视图
             */
            $(&#39;&amp;lt;div&amp;gt;&#39;).load(&#39;./viewItems.php?t=&#39; + (calEvent.start / 1000), function() {
                var self= this;
                /**
                 * 订餐的提交
                 */
                $(&#39;.ctrl-submit&#39;, this).bind(&#39;click&#39;, function(event) {
                    var record = $(this).parents(&#39;tr.ctrl-record&#39;).get(0);
                    var userId = $(record).attr(&#39;userId&#39;);
                    var food = $(&#39;.ctrl-food-input&#39;, record).val();
                    $(self).dialog(&#39;close&#39;);
                    $.ajax({
                        type: &#39;POST&#39;, 
                        url: &#39;./submitItem.php&#39;, 
                        data:&#39;userId=&#39; + userId + &#39;&amp;amp;food=&#39; + food + &#39;&amp;amp;t=&#39; + (calEvent.start / 1000), 
                        async: false,  
                        success: function(res) {
                            $(&#39;&amp;lt;div&amp;gt;&#39;).text(&#39;嘿嘿嘿, 吃好喝好啊.&#39;).dialog({
                                resizable: false, 
                                modal: true, 
                                title: &#39;订了, 该干啥干啥吧.&#39;, 
                                width: 600, 
                                close: function() {
                                    $(this).dialog(&#39;destroy&#39;).remove();
                                }, 
                                buttons: {
                                    &#39;就是关的时候方便点1&#39;: function() {
                                        $(this).dialog(&#39;close&#39;);
                                    }, 
                                    &#39;就是关的时候方便点2&#39;: function() {
                                        $(this).dialog(&#39;close&#39;);
                                    }, 
                                    &#39;就是关的时候方便点3&#39;: function() {
                                        $(this).dialog(&#39;close&#39;);
                                    }
                                }
                            });
                        }
                    });
                });
                /**
                 * 把加载到的订餐视图预置为jqueryUI.dialog
                 */
                var t = new Date(calEvent.start);
                $(this).css(&#39;margin&#39;, &#39;0 auto&#39;).dialog({
                    resizable: false, 
                    modal: true, 
                    title: &#39;[&#39; + t.getFullYear() + &#39;年&#39; + (t.getMonth() + 1) + &#39;月&#39; + t.getDay() + &#39;日&#39; + (t.getHours() &amp;gt; 13 ? &#39;下午&#39; : &#39;上午&#39;) + &#39;]----你想吃啥啊?&#39;, 
                    width: 1000, 
                    close: function() {
                        $(this).dialog(&#39;destroy&#39;).remove();
                    }, 
                    buttons: {
                        &#39;就是关的时候方便点1&#39;: function() {
                            $(this).dialog(&#39;close&#39;);
                        }, 
                        &#39;就是关的时候方便点2&#39;: function() {
                            $(this).dialog(&#39;close&#39;);
                        }, 
                        &#39;就是关的时候方便点3&#39;: function() {
                            $(this).dialog(&#39;close&#39;);
                        }
                    }
                });
            });
        }

    });
    /**
     * 修改当天的DOM, 加明显标记
     */
    $(&#39;.fc-today&#39;).append(&#39;&amp;lt;div style=&amp;quot;margin-top: 40px; color: #888933; font-size: 20px; font-weight: bold;&amp;quot; mce_style=&amp;quot;margin-top: 40px; color: #888933; font-size: 20px; font-weight: bold;&amp;quot;&amp;gt;这里是今天&amp;lt;/div&amp;gt;&#39;);
    /**
     * 加人按钮, 用来加载用户管理界面
     */
    $(&#39;#maintain&#39;).bind(&#39;click&#39;, function(event) {
        $(&#39;&amp;lt;div&amp;gt;&#39;).load(&#39;./viewUsers.php&#39;, function() {
            $(this).dialog({
                resizable: false, 
                modal: true, 
                title: &#39;嘿嘿, 吃着喝着啊&#39;, 
                width: 1128,
                height: 450, 
                close: function() {
                    $(this).dialog(&#39;destroy&#39;).remove();
                }, 
                buttons: {
                    &#39;就是关的时候方便点1&#39;: function() {
                        $(this).dialog(&#39;close&#39;);
                    }, 
                    &#39;就是关的时候方便点2&#39;: function() {
                        $(this).dialog(&#39;close&#39;);
                    }, 
                    &#39;就是关的时候方便点3&#39;: function() {
                        $(this).dialog(&#39;close&#39;);
                    }, 
                    &#39;就是关的时候方便点4&#39;: function() {
                        $(this).dialog(&#39;close&#39;);
                    }
                }
            });
            bindMaitainArea(this);
        });
    });
    /**
     * 用户管理界面加载完毕之后, 对其上的按钮绑定事件
     */
    var bindMaitainArea = (function(context) {
        /**
         * 新增用户的事件
         */
        $(&#39;#new_user&#39;, context).bind(&#39;click&#39;, function(event) {
            var self = this;
            $.ajax({
                type: &#39;POST&#39;, 
                url: &#39;./addUser.php&#39;, 
                data:&#39;name=&#39; + $(&#39;#new_user_input&#39;).val(), 
                timeout:8000,
                async: false,  
                success: function(res) {
                    $(self).parents(&#39;.ui-dialog-content&#39;).load(&#39;./viewUsers.php&#39;, function() {
                        bindMaitainArea();
                    });
                }
            });
        });
        /**
         * 删除用户的事件
         */
        $(&#39;.ctrl-del-user&#39;, context).bind(&#39;click&#39;, function(event) {
            var self = this;
            $.ajax({
                type: &#39;POST&#39;, 
                url: &#39;./delUser.php&#39;, 
                data:&#39;id=&#39; + $(self).parents(&#39;.ctrl-record&#39;).attr(&#39;userId&#39;), 
                timeout:8000,
                async: false,  
                success: function(res) {
                    $(self).parents(&#39;.ui-dialog-content&#39;).load(&#39;./viewUsers.php&#39;, function() {
                        bindMaitainArea();
                    });
                }
            });
        });
    });
});
</code></pre>

<p> 
系统涉及的自定义样式eat.css</p>

<pre lang="css"><code>@CHARSET &amp;quot;UTF-8&amp;quot;;
body{font-size: 75%;}
.wrapper{width: 1024px; margin: 0 auto;}
.food-input{width: 300px; border: 1px solid #E0E0E0;}
table{border-left: 1px solid #D0D0D0; border-top: 1px solid #D0D0D0;}
th, td{border-right: 1px solid #D0D0D0; border-bottom: 1px solid #D0D0D0;}

</code></pre>

<p> 
 
 
 </p>

          </section>

          
        </article>
        <!-- END Main content -->
      </div>
    </main>


    <!-- Footer -->
    <footer class="site-footer">
      <div class="container">
        <a id="scroll-up" href="#"><i class="fa fa-angle-up"></i></a>

        <div class="row">
          <div class="col-md-6 col-sm-6">
            <p>Copyright &copy; 2016. All right reserved(京ICP备11026137号-2)</p>
          </div>
          <div class="col-md-6 col-sm-6">
<script language="javascript" type="text/javascript" src="http://js.users.51.la/18906058.js"></script>
<noscript><a href="http://www.51.la/?18906058" target="_blank"><img alt="&#x6211;&#x8981;&#x5566;&#x514D;&#x8D39;&#x7EDF;&#x8BA1;" src="http://img.users.51.la/18906058.asp" style="border:none" /></a></noscript>
          </div>
        </div>
      </div>
    </footer>
    <!-- END Footer -->

    <!-- Scripts -->
    <script src="http://static-cdn.tec-inf.com/js/theDocs.all.min.js"></script>
    <script src="http://static-cdn.tec-inf.com/js/theDocs.js"></script>
    <script src="http://static-cdn.tec-inf.com/js/custom.js"></script>

  </body>
</html>
